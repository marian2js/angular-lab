<div ng-init="loadRepositories()">
  <div ng-show="user">
    Welcome <a ng-href="{{ user.html_url }}">{{ user.name }}</a>!
    <div class="pull-right" ng-show="repositories.length">
      <input type="text" ng-model="search.name" class="form-control" placeholder="Search...">
    </div>
  </div>
  <hr>

  <div class="row marketing">
    <div ng-show="loading.repos">Loading...</div>
    <div ng-show="repositories.length">You have <strong>{{ repositories.length }}</strong> repositories starred!</div>
    <hr/>

    <table class="table table-striped table-repositories" ng-show="repositories.length">
      <thead>
      <tr>
        <th ng-click="setOrder('name')">Repository</th>
        <th ng-click="setOrder('watchers')">Watchers</th>
        <th ng-click="setOrder('forks')">Forks</th>
        <th ng-click="setOrder('contributors.length')">Contributors</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="repo in repositories | filter: search | orderBy: order:reverse">
        <td>
          <a ng-href="{{ repo.svn_url }}" target="_blank">{{ repo.name }}</a>
        </td>
        <td>{{ repo.watchers }}</td>
        <td>{{ repo.forks }}</td>
        <td>
          {{ repo.contributors ? repo.contributors.length : 'Loading...' }}<span ng-show="repo.contributors.full">+</span>
        </td>
        <td>
          <a ng-href="/#/repo/{{ repo.owner.login }}/{{ repo.name }}">More Info</a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>